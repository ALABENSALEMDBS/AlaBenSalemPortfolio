<header class="header">
  <nav class="navbar">
    <div class="logo">
      <img [src]="themeService.isDarkMode() ? 'images/Logo-horizontal-dark.png' : 'images/Logo-horizontal.png'" alt="Logo" class="logo-img">
    </div>
    <ul class="nav-menu" [class.active]="menuActive">
      <!-- Menu Buttons for Mobile -->
      <li class="nav-item mobile-menu-item">
        <button class="mobile-menu-btn cv-btn" (click)="openCvModal()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14,2 14,8 20,8"/>
          </svg>
          {{ 'header.cv' | translate }}
        </button>
      </li>
      <li class="nav-item mobile-menu-item">
        <button class="mobile-menu-btn projects-btn" (click)="closeMenu()" routerLink="/projects">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
          </svg>
          {{ 'header.projects' | translate }}
        </button>
      </li>
      <li class="nav-item mobile-menu-item">
        <button class="mobile-menu-btn contact-btn" (click)="closeMenu()" routerLink="/contact">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <polyline points="22,6 12,13 2,6"/>
          </svg>
          {{ 'header.contact' | translate }}
        </button>
      </li>
      
      <!-- Date and Weather Card -->
      <li class="nav-item datetime-display">
        <div class="datetime-wrapper">
          <div class="date-time-info">
            <span class="date-text">{{ currentDate }}</span>
            <span class="time-text">{{ currentTime }}</span>
          </div>
          <div class="weather-info" *ngIf="weather">
            <span class="weather-icon">{{ getWeatherIcon(weather.weathercode) }}</span>
            <span class="weather-temp">{{ weather.temperature }}°C / Tunis</span>
          </div>
        </div>
      </li>
    </ul>
    <div class="theme-lang-controls">
      <!-- Bouton Theme -->
      <button class="theme-toggle-btn" (click)="toggleTheme()" [attr.aria-label]="themeService.isDarkMode() ? 'Switch to Light Mode' : 'Switch to Dark Mode'">
        <svg *ngIf="!themeService.isDarkMode()" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg *ngIf="themeService.isDarkMode()" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
      </button>

      <!-- Séparateur -->
      <span class="controls-separator">|</span>

      <!-- Language Switcher -->
      <div class="lang-switcher">
        <button class="lang-icon-btn" (click)="toggleLangMenu()" aria-label="Change Language">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><path d="M24 0v24H0V0zM12.594 23.258l-.012.002-.071.035-.02.004-.014-.004-.071-.036c-.01-.003-.019 0-.024.006l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427c-.002-.01-.009-.017-.016-.018m.264-.113-.014.002-.184.093-.01.01-.003.011.018.43.005.012.008.008.201.092c.012.004.023 0 .029-.008l.004-.014-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014-.034.614c0 .012.007.02.017.024l.015-.002.201-.093.01-.008.003-.011.018-.43-.003-.012-.01-.01z"/><path fill="currentColor" d="M9 3a1 1 0 0 1 .993.883L10 4v1h4a1 1 0 0 1 .116 1.993L14 7h-1.055c-.223 2.032-1.116 3.99-2.545 5.688.523.454 1.102.878 1.735 1.266l.386.228 2.067-4.592a1 1 0 0 1 1.763-.115l.06.115 4.5 10a1 1 0 0 1-1.77.924l-.053-.104L18.003 18h-5.007l-1.084 2.41a1 1 0 0 1-1.866-.711l.042-.11 1.61-3.576a15.229 15.229 0 0 1-2.7-1.894c-1.287 1.136-2.848 2.098-4.627 2.81a1 1 0 1 1-.743-1.857c1.557-.623 2.887-1.441 3.972-2.382a11.466 11.466 0 0 1-1.978-3.34 1 1 0 0 1 1.873-.702A9.41 9.41 0 0 0 9 11.244c.989-1.227 1.625-2.576 1.877-3.931L10.928 7H4a1 1 0 0 1-.117-1.993L4 5h4V4a1 1 0 0 1 1-1m8.103 13L15.5 12.437 13.898 16z"/></g></svg>
        </button>
        <div class="lang-dropdown" [class.active]="langMenuActive">
          <button 
            class="lang-btn fr" 
            [class.active]="currentLang === 'fr'"
            (click)="switchLanguage('fr')"
            aria-label="Français">
            FR
          </button>
          <span class="lang-separator">|</span>
          <button 
            class="lang-btn en" 
            [class.active]="currentLang === 'en'"
            (click)="switchLanguage('en')"
            aria-label="English">
            EN
          </button>
        </div>
      </div>
    </div>
    <div class="hamburger" [class.active]="menuActive" (click)="toggleMenu()">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </div>
  </nav>
</header>
